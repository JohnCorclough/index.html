<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Venn & Probability Multiple Choice (Q10–Q12)</title>
  <style>
    :root { --maxw: 980px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; line-height: 1.35; }
    header { padding: 18px 16px; border-bottom: 1px solid #ddd; }
    main { max-width: var(--maxw); margin: 0 auto; padding: 14px 12px 60px; }
    .card { border: 1px solid #ddd; border-radius: 14px; padding: 14px; margin: 12px 0; background: #fff; box-shadow: 0 1px 0 rgba(0,0,0,0.03); }
    h1 { font-size: 18px; margin: 0 0 4px; }
    .muted { color: #555; font-size: 13px; margin: 0; }
    h2 { font-size: 16px; margin: 0 0 10px; }
    .stem { margin: 8px 0 12px; }
    .options { display: grid; gap: 10px; }
    button.option {
      width: 100%;
      text-align: left;
      border: 1px solid #ccc;
      background: #fafafa;
      padding: 12px 12px;
      border-radius: 12px;
      font-size: 15px;
      cursor: pointer;
      touch-action: manipulation;
    }
    button.option:active { transform: scale(0.99); }
    button.option[disabled] { cursor: not-allowed; opacity: 0.75; }
    .feedback { margin-top: 10px; padding: 10px 12px; border-radius: 12px; border: 1px solid #ddd; background: #f7f7f7; }
    .correct { border-color: #2b8a3e; background: #f1fff5; }
    .wrong { border-color: #b02a37; background: #fff3f3; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; margin-top: 12px; }
    .pill { border: 1px solid #ddd; border-radius: 999px; padding: 8px 10px; font-size: 13px; background: #fff; }
    .btn {
      border: 1px solid #bbb; background: #fff; padding: 10px 12px; border-radius: 12px;
      cursor: pointer; font-size: 14px; touch-action: manipulation;
    }
    .btn:active { transform: scale(0.99); }
    details summary { cursor: pointer; }
    code.kbd { padding: 2px 6px; border: 1px solid #ddd; border-radius: 8px; background: #f7f7f7; }

    /* Diagrams */
    .diagramWrap { margin: 10px 0 14px; }
    .diagramBox {
      border: 1px solid #e0e0e0; border-radius: 14px; padding: 10px; background: #fcfcfc;
    }
    svg { width: 100%; height: auto; display: block; }

    .svgRect { stroke: #444; stroke-width: 2; fill: transparent; rx: 14; ry: 14; }
    .svgStroke { stroke: #444; stroke-width: 2.5; fill: transparent; }
    .svgLabel { font-size: 16px; font-weight: 700; }
    .svgSub { font-size: 14px; font-weight: 600; }
    .svgSmall { font-size: 13px; }
    .svgNum { font-size: 18px; font-weight: 800; }
    .svgHint { font-size: 13px; }
  </style>
</head>
<body>
  <header>
    <h1>Interactive Multiple Choice: Q10, Q11, Q12</h1>
    <p class="muted">Tap an answer. Diagrams are shown under each question. (Works on phones; no typing.)</p>
  </header>

  <main>
    <div class="card">
      <h2>Score</h2>
      <div class="row">
        <div class="pill"><strong id="score">0</strong> / <strong id="total">0</strong> correct</div>
        <button class="btn" id="resetBtn">Reset all</button>
      </div>
      <p class="muted" style="margin-top:10px">
        Keep this file named <code class="kbd">index.html</code>.
      </p>
    </div>

    <div id="quiz"></div>

    <details class="card">
      <summary><strong>Teacher notes (answers used)</strong></summary>
      <div style="margin-top:10px" class="muted">
        <ul>
          <li><strong>Q10:</strong> 29%</li>
          <li><strong>Q11:</strong> (a) 1/7, (b) 5/7, (c) 2/3</li>
          <li><strong>Q12:</strong> Intersection = 0.45, (a) 45/83, (b) 38/55</li>
        </ul>
      </div>
    </details>
  </main>

  <script>
    // =========================
    //  Helpers
    // =========================
    function escapeHTML(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    // =========================
    //  Cleaner SVG diagrams
    // =========================

    // A clean, roomy 2-set Venn.
    // Labels are anchored to corners/above circles to avoid collisions on phones.
    function cleanVennSVG({
      leftTitle, rightTitle, // e.g. "Canada (C)", "France (F)"
      leftSub, rightSub,     // e.g. "38%", "80%"
      outsideLabel,          // e.g. "Neither: 11%" or "Outside: 0%"
      leftOnly, overlap, rightOnly,
      footerLine1, footerLine2
    }) {
      return `
        <div class="diagramWrap">
          <div class="diagramBox">
            <svg viewBox="0 0 760 340" role="img" aria-label="Venn diagram">
              <rect x="20" y="20" width="720" height="300" class="svgRect"></rect>

              <!-- Titles (top corners) -->
              <text x="60" y="62" class="svgLabel">${escapeHTML(leftTitle)}</text>
              <text x="60" y="86" class="svgSub">${escapeHTML(leftSub || "")}</text>

              <text x="700" y="62" text-anchor="end" class="svgLabel">${escapeHTML(rightTitle)}</text>
              <text x="700" y="86" text-anchor="end" class="svgSub">${escapeHTML(rightSub || "")}</text>

              <!-- Outside label (top-right but below title, with plenty of space) -->
              ${outsideLabel ? `<text x="700" y="118" text-anchor="end" class="svgSmall">${escapeHTML(outsideLabel)}</text>` : ``}

              <!-- Circles -->
              <circle cx="310" cy="185" r="110" class="svgStroke"></circle>
              <circle cx="450" cy="185" r="110" class="svgStroke"></circle>

              <!-- Region notes -->
              ${leftOnly ? `<text x="250" y="190" class="svgSmall">${escapeHTML(leftOnly)}</text>` : ``}
              ${overlap ? `<text x="380" y="190" text-anchor="middle" class="svgSmall">${escapeHTML(overlap)}</text>` : ``}
              ${rightOnly ? `<text x="505" y="190" class="svgSmall">${escapeHTML(rightOnly)}</text>` : ``}

              <!-- Footer (split into 2 lines so it never becomes a long cluttery sentence) -->
              ${footerLine1 ? `<text x="60" y="295" class="svgHint">${escapeHTML(footerLine1)}</text>` : ``}
              ${footerLine2 ? `<text x="60" y="315" class="svgHint">${escapeHTML(footerLine2)}</text>` : ``}
            </svg>
          </div>
        </div>
      `;
    }

    // Q10: minimal labels inside; short, split hint
    function q10DiagramSVG() {
      return cleanVennSVG({
        leftTitle: "Canada (C)",
        leftSub: "38%",
        rightTitle: "France (F)",
        rightSub: "80%",
        outsideLabel: "Neither: 11%",
        leftOnly: "C only",
        overlap: "C ∩ F",
        rightOnly: "F only",
        footerLine1: "Step 1: P(C ∪ F) = 100% − 11% = 89%",
        footerLine2: "Step 2: P(C ∩ F) = P(C) + P(F) − P(C ∪ F)"
      });
    }

    // Q12: same clean layout but with actual region % values
    function q12DiagramSVG() {
      return cleanVennSVG({
        leftTitle: "Theory (T)",
        leftSub: "62%",
        rightTitle: "Practical (P)",
        rightSub: "83%",
        outsideLabel: "Outside: 0%",
        leftOnly: "T only: 17%",
        overlap: "Both: 45%",
        rightOnly: "P only: 38%",
        footerLine1: "Everyone passed at least one section ⇒ outside region is 0%",
        footerLine2: "Overlap = 62% + 83% − 100% = 45%"
      });
    }

    // Q11: rebuild with more whitespace and spaced numbers
    function q11DiagramSVG() {
      return `
        <div class="diagramWrap">
          <div class="diagramBox">
            <svg viewBox="0 0 760 360" role="img" aria-label="Venn diagram with numbers for question 11">
              <rect x="20" y="20" width="720" height="320" class="svgRect"></rect>

              <!-- Titles -->
              <text x="60" y="62" class="svgLabel">ξ (universal set)</text>

              <!-- Circles -->
              <circle cx="315" cy="210" r="115" class="svgStroke"></circle>
              <circle cx="465" cy="210" r="115" class="svgStroke"></circle>

              <text x="255" y="120" class="svgLabel">A</text>
              <text x="525" y="120" class="svgLabel">B</text>

              <!-- A only: {4} -->
              <text x="260" y="220" class="svgNum">4</text>

              <!-- Overlap: {5,1} -->
              <text x="390" y="195" text-anchor="middle" class="svgNum">5</text>
              <text x="390" y="235" text-anchor="middle" class="svgNum">1</text>

              <!-- B only: {8,11,10} (spread out) -->
              <text x="505" y="185" class="svgNum">8</text>
              <text x="535" y="225" class="svgNum">11</text>
              <text x="495" y="255" class="svgNum">10</text>

              <!-- Outside both: {12} placed well away from circle -->
              <text x="675" y="210" class="svgNum">12</text>

              <!-- Footer -->
              <text x="60" y="308" class="svgHint">Total outcomes = 7: {4, 5, 1, 8, 11, 10, 12}</text>
              <text x="60" y="328" class="svgHint">All outcomes are equally likely.</text>
            </svg>
          </div>
        </div>
      `;
    }

    // =========================
    //  QUIZ DATA
    // =========================
    const questions = [
      {
        id: "q10",
        title: "Question 10",
        diagramHTML: q10DiagramSVG(),
        stem: "38% have been to Canada. 80% have been to France. 11% have been to neither Canada nor France. Find the percentage who have been to <strong>both</strong> Canada and France.",
        choices: [
          { text: "29%", correct: true,  explain: "P(C ∪ F)=1−0.11=0.89. Then P(C ∩ F)=0.38+0.80−0.89=0.29 ⇒ 29%." },
          { text: "7%",  correct: false, explain: "That isn’t the inclusion–exclusion result here." },
          { text: "31%", correct: false, explain: "You’d only get 31% if the union were 87%, but the union is 89%." },
          { text: "49%", correct: false, explain: "Too high: the intersection can’t exceed the smaller group (38%)." }
        ]
      },

      {
        id: "q11a",
        title: "Question 11(a)",
        diagramHTML: q11DiagramSVG(),
        stem: "A number is chosen at random. Write down <strong>P(A ∩ B')</strong>.",
        choices: [
          { text: "1/7", correct: true,  explain: "A ∩ B' means in A but not in B. That’s {4}. There are 7 numbers total ⇒ 1/7." },
          { text: "2/7", correct: false, explain: "2/7 is the overlap (A ∩ B), not A ∩ B'." },
          { text: "3/7", correct: false, explain: "3/7 is P(A) (A-only plus overlap)." },
          { text: "4/7", correct: false, explain: "A ∩ B' has only 1 outcome here, not 4." }
        ]
      },

      {
        id: "q11b",
        title: "Question 11(b)",
        diagramHTML: q11DiagramSVG(),
        stem: "Write down <strong>P(A' ∪ B')</strong>.",
        choices: [
          { text: "5/7", correct: true,  explain: "A' ∪ B' = (A ∩ B)' (De Morgan). Overlap has 2 outcomes, so 1 − 2/7 = 5/7." },
          { text: "2/7", correct: false, explain: "2/7 is P(A ∩ B), not its complement." },
          { text: "3/7", correct: false, explain: "3/7 is P(A), not A' ∪ B'." },
          { text: "6/7", correct: false, explain: "6/7 would mean only 1 number in the overlap, but there are 2." }
        ]
      },

      {
        id: "q11c",
        title: "Question 11(c)",
        diagramHTML: q11DiagramSVG(),
        stem: "Write down <strong>P(B | A)</strong>.",
        choices: [
          { text: "2/3", correct: true,  explain: "In A there are 3 outcomes ({4,5,1}). Of those, 2 are also in B ({5,1}). So P(B|A)=2/3." },
          { text: "2/7", correct: false, explain: "2/7 is P(A ∩ B) (unconditional), not conditional on A." },
          { text: "3/7", correct: false, explain: "3/7 is P(A), not P(B|A)." },
          { text: "5/7", correct: false, explain: "5/7 is from part (b), not part (c)." }
        ]
      },

      {
        id: "q12a",
        title: "Question 12(a)",
        diagramHTML: q12DiagramSVG(),
        stem: "Everyone passed at least one section. 62% passed theory (T) and 83% passed practical (P). Work out <strong>P(T | P)</strong>.",
        choices: [
          { text: "45/83", correct: true,  explain: "P(T∩P)=0.62+0.83−1=0.45. Then P(T|P)=0.45/0.83=45/83." },
          { text: "62/83", correct: false, explain: "That incorrectly uses P(T)/P(P) instead of P(T∩P)/P(P)." },
          { text: "17/83", correct: false, explain: "0.17 is T-only, not the intersection." },
          { text: "38/83", correct: false, explain: "0.38 is P-only, not the intersection." }
        ]
      },

      {
        id: "q12b",
        title: "Question 12(b)",
        diagramHTML: q12DiagramSVG(),
        stem: "Work out the probability the student passed the practical section, <strong>given they passed only one section</strong>.",
        choices: [
          { text: "38/55", correct: true,  explain: "Only-one-section = 0.17+0.38=0.55. Given that, practical means P-only=0.38 ⇒ 0.38/0.55=38/55." },
          { text: "83/100", correct: false, explain: "That’s P(P) overall, not conditional on passing only one section." },
          { text: "38/100", correct: false, explain: "That’s P-only overall, not conditional." },
          { text: "45/55", correct: false, explain: "0.45 is both sections (intersection), not practical-only." }
        ]
      }
    ];

    // =========================
    //  RENDER + LOGIC
    // =========================
    const quizEl = document.getElementById("quiz");
    const scoreEl = document.getElementById("score");
    const totalEl = document.getElementById("total");
    const resetBtn = document.getElementById("resetBtn");

    const state = {}; // state[qid] = { answered: bool, correct: bool }

    function totalQuestions() { return questions.length; }

    function computeScore() {
      let s = 0;
      for (const q of questions) if (state[q.id]?.answered && state[q.id]?.correct) s++;
      return s;
    }

    function updateScoreUI() {
      scoreEl.textContent = computeScore();
      totalEl.textContent = totalQuestions();
    }

    function setFeedback(box, isCorrect, text) {
      box.className = "feedback " + (isCorrect ? "correct" : "wrong");
      box.innerHTML = text;
    }

    function render() {
      quizEl.innerHTML = "";
      for (const q of questions) {
        const card = document.createElement("div");
        card.className = "card";
        card.id = q.id;

        const h = document.createElement("h2");
        h.textContent = q.title;

        const diagram = document.createElement("div");
        diagram.innerHTML = q.diagramHTML || "";

        const stem = document.createElement("div");
        stem.className = "stem";
        stem.innerHTML = q.stem;

        const opts = document.createElement("div");
        opts.className = "options";

        const feedback = document.createElement("div");
        feedback.className = "feedback";
        feedback.style.display = "none";

        q.choices.forEach((ch, idx) => {
          const btn = document.createElement("button");
          btn.className = "option";
          btn.type = "button";
          btn.innerHTML = `${String.fromCharCode(65 + idx)}. ${ch.text}`;

          btn.addEventListener("click", () => {
            if (state[q.id]?.answered) return;

            state[q.id] = { answered: true, correct: !!ch.correct };

            [...opts.querySelectorAll("button.option")].forEach(b => b.disabled = true);

            feedback.style.display = "block";
            if (ch.correct) {
              setFeedback(feedback, true, `<strong>Correct.</strong> ${ch.explain}`);
            } else {
              const right = q.choices.find(x => x.correct);
              setFeedback(feedback, false,
                `<strong>Not quite.</strong> ${ch.explain}<br><br><strong>Correct answer:</strong> ${right.text}<br>${right.explain}`
              );
            }
            updateScoreUI();
          });

          opts.appendChild(btn);
        });

        card.appendChild(h);
        card.appendChild(diagram);
        card.appendChild(stem);
        card.appendChild(opts);
        card.appendChild(feedback);
        quizEl.appendChild(card);
      }

      updateScoreUI();
    }

    function resetAll() {
      for (const k of Object.keys(state)) delete state[k];
      render();
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    resetBtn.addEventListener("click", resetAll);

    render();
  </script>
</body>
</html>
